#:schema node_modules/wrangler/config-schema.json
name = "dundun-sentinel"
main = "src/index.js"
compatibility_date = "2024-12-08"
compatibility_flags = [ "nodejs_compat" ]

# Workers Assets - 静态资源配置
[assets]
directory = "./frontend/dist"
binding = "ASSETS"
# SPA 模式：所有非匹配路由返回 index.html
html_handling = "auto-trailing-slash"
not_found_handling = "single-page-application"

# KV 命名空间绑定
# 注意：实际部署时需要通过 GitHub Secrets 配置 KV_NAMESPACE_ID
# 本地开发使用 --local 模式，会自动创建本地 KV
[[kv_namespaces]]
binding = "MONITOR_DATA"
id = "YOUR_KV_NAMESPACE_ID"
preview_id = "a4e7e15ade124ad5a6f7ca381ff7566a"

# 定时任务
[triggers]
crons = ["* * * * *", "0 4 * * *"]

# 本地开发配置
[vars]
ENVIRONMENT = "development"
